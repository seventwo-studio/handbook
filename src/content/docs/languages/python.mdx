---
title: Python Coding Standards
---

## Overview

Python is used at SevenTwo Studio for backend services, tooling, and data processing. We target the latest stable Python version (3.12+) and emphasize type safety through comprehensive type hints. Our Python standards focus on modern Python features, strict typing, and fast, reliable tooling.

## Type Hints and Type Checking

We use type hints always, without exception. Type hints document function signatures, catch errors early, and enable better IDE support. We use pyright and mypy for static type checking, ensuring our code is type-safe before runtime.

Type hints should be comprehensive, covering function parameters, return values, and instance variables. We avoid using `Any` type as it defeats the purpose of type checking. When dealing with complex types, we use `Protocol`, `TypeVar`, and other advanced typing features.

## Code Formatting and Linting

We use Ruff for both code formatting and linting. Ruff is extremely fast and handles both concerns in a single tool. It enforces PEP 8 compliance and catches common errors. The formatter runs automatically in pre-commit hooks and CI.

## Project Structure

We follow the src layout for Python projects, with code organized under `src/package_name/`. This structure prevents accidental imports from the project directory and makes the package structure explicit. It's the recommended approach for modern Python projects.

## Web Framework

We use FastAPI for web services and APIs. FastAPI provides automatic API documentation, request validation through Pydantic, and excellent async support. It leverages Python's type hints for runtime validation and documentation generation.

## Async Operations

We use async/await with asyncio for asynchronous operations. This provides efficient I/O handling for web services and concurrent operations. FastAPI, our web framework, is built on async foundations and works seamlessly with asyncio.

## Database Access

We use SQLAlchemy as our ORM for database operations. SQLAlchemy provides powerful query capabilities, connection pooling, and support for multiple database backends. We use SQLAlchemy's async support for non-blocking database operations.

## Testing

We use pytest as our testing framework. Pytest provides a clean, expressive syntax for writing tests and excellent plugin ecosystem. We maintain minimum 80% code coverage and practice TDD strictly.

Tests should be organized clearly with descriptive names. We use pytest fixtures for test setup and teardown. We follow the Arrange-Act-Assert (AAA) pattern to keep tests readable and maintainable.

## Package Management

We use uv for package and environment management. UV is significantly faster than pip and provides reliable dependency resolution. It handles both package installation and virtual environment creation.

## Error Handling

We use custom error classes for domain-specific errors. This provides clear error categorization and makes error handling consistent across the codebase. For async operations, we use try-catch with async/await patterns.

## Documentation

We use Google-style docstrings for documentation. Google style is readable both in source code and when rendered as documentation. Docstrings are required for complex functions and should include parameter descriptions, return values, and raised exceptions.

## Code Style

We enforce PEP 8 compliance through Ruff. Code uses 2-space indentation (aligned with our other languages), 120-character line limits, and consistent formatting. The formatter makes these decisions automatically, eliminating style debates.

## Rules

### Type Safety

1. Target latest stable Python version (3.12+)
2. Use type hints always, for all functions and variables
3. Use pyright for static type checking
4. Use mypy as additional type checker
5. Never use `Any` type without justification

### Code Formatting and Linting

6. Use Ruff for code formatting
7. Use Ruff for linting
8. Enforce PEP 8 compliance automatically
9. 2-space indentation required
10. 120-character line limit

### Project Structure and Tools

11. Follow src layout (src/package_name/) for project structure
12. Use uv for package and environment management

### Web and API Development

13. Use FastAPI for web services and APIs
14. Use async/await with asyncio for async operations

### Database Access

15. Use SQLAlchemy as ORM for database operations
16. Use SQLAlchemy's async support for non-blocking queries

### Testing

17. Use pytest for all testing
18. Minimum 80% code coverage required
19. Practice Test-Driven Development (TDD) strictly
20. Follow Arrange-Act-Assert (AAA) pattern in tests
21. Use pytest fixtures for test setup
22. Tests required for all new code and bug fixes
23. Minimal mocking in tests - prefer real implementations

### Error Handling

24. Use custom error classes for domain-specific errors
25. Use try-catch with async/await for async error handling
26. Generic error messages for users, detailed logging for debugging

### Naming Conventions

27. Use snake_case for variables, functions, and modules
28. Use PascalCase for classes
29. Use SCREAMING_SNAKE_CASE for constants
30. Boolean variables should be descriptive without prefixes (active, permitted)
31. Maximum function length is 50 lines

### Documentation

32. Use Google-style docstrings
33. Document complex functions with parameters, returns, and exceptions
34. JSDoc-style documentation (@param, @returns) required for documented functions
35. No TODO/FIXME/HACK comments - use issue tracker
